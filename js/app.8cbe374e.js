(function(){"use strict";var e={8696:function(e,t,n){var l=n(9242),i=(n(7658),n(3396)),u=n(4870),a=n(7139);const o=(0,i._)("label",{for:"input-devices"},"Select input device: ",-1),r=["value"];var c={__name:"InputDeviceSelector",emits:["select"],setup(e,{emit:t}){const n=(0,u.iH)([]);function l(e){t("select",e.target.value)}return navigator.mediaDevices.enumerateDevices().then((e=>n.value.push(...e.filter((({kind:e})=>"audioinput"===e))))),(e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[o,(0,i._)("select",{id:"input-devices",onChange:l},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.value,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.deviceId,value:e.deviceId},(0,a.zw)(e.label),9,r)))),128))],32)],64))}};const v=c;var s=v;n(3408),n(4590),n(5065);const f={class:"controls"},d=["value"];var p={__name:"Oscilloscope",props:{input:{type:MediaStreamAudioSourceNode,default:null},ctx:{type:AudioContext,default:null},state:{type:String,default:"inactive"}},setup(e){const t=e,n=(0,u.iH)(null),o=["Time Domain","Frequency Domain"],r=(0,u.iH)("Time Domain"),{ctx:c,input:v,state:s}=(0,u.BK)(t),p=c.value.createAnalyser();p.fftSize=2048,v.value.connect(p);const g=p.frequencyBinCount,h=new Uint8Array(g);let m=0;function y(e){if(!n.value)return;requestAnimationFrame(y);const t=n.value.getContext("2d");t.fillStyle="rgb(200, 200, 200)",t.fillRect(0,0,n.value.width,n.value.height),"Time Domain"===r.value?b(t):"Frequency Domain"===r.value&&w(t),_(t),D(t,Number(1e3/(e-m)).toFixed(0)),m=e}function b(e){p.getByteTimeDomainData(h),e.lineWidth=2,e.strokeStyle="rgb(0, 0, 0)",e.beginPath();const t=1*n.value.width/g;let l=0;for(let i=0;i<g;i++){const u=h[i]/128,a=u*n.value.height/2;0===i?e.moveTo(l,a):e.lineTo(l,a),l+=t}e.lineTo(n.value.width,n.value.height/2),e.stroke()}function w(e){p.getByteFrequencyData(h);const t=n.value.width/g*2.5;let l=0;for(let i=0;i<g;i++){const u=-h[i];e.fillStyle="rgb("+(u+100)+", 50, 50)",e.fillRect(l,n.value.height/2,t,u/2),l+=t+1}}function _(e){e.beginPath(),e.fillStyle="recording"===s.value?"red":"gray",e.arc(.035*n.value.width,.075*n.value.height-7,8,0,2*Math.PI),e.fill(),e.font="1.5rem serif",e.fillStyle="recording"===s.value?"black":"gray",e.fillText("REC",.05*n.value.width,.075*n.value.height)}function D(e,t){e.fillStyle="black",e.fillText(`${t} FPS`,.9*n.value.width,.075*n.value.height)}return p.getByteTimeDomainData(h),(0,i.bv)((()=>{y()})),(e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("canvas",{id:"oscilloscope",ref_key:"oscilloscope",ref:n,width:"1000",height:"600"},null,512),(0,i._)("div",f,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(o,(e=>(0,i._)("option",{value:e,key:e},(0,a.zw)(e),9,d))),64))],512),[[l.bM,r.value]])])],64))}},g=n(89);const h=(0,g.Z)(p,[["__scopeId","data-v-222c9b50"]]);var m=h;const y=["src"],b=(0,i._)("button",null,"Delete",-1);var w={__name:"Recording",props:{src:{type:String,required:!0}},setup(e){const t="Default";return(n,l)=>((0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("article",null,[(0,i._)("p",null,(0,a.zw)(t)),(0,i._)("audio",{controls:"",src:e.src},null,8,y),b])]))}};const _=w;var D=_,k={__name:"App",setup(e){const t=(0,u.iH)(""),n=(0,u.iH)(),l=(0,u.iH)(),a=(0,u.iH)(),o=(0,u.iH)([]),r=(0,u.iH)();let c=[];function v(e){console.log(`Device ${e} selected`),y(e)}function f(){n.value=new AudioContext,y(t.value)}function d(){n.value&&(a.value.start(),l.value=a.value.state)}function p(){n.value&&(a.value.stop(),l.value=a.value.state)}function g(e){c.push(e.data)}function h(e){let t=new Blob(c,{type:"audio/mpeg"});c=[];const n=URL.createObjectURL(t);o.value.push({src:n})}function y(e){t.value=e,navigator.mediaDevices.getUserMedia({audio:!0,deviceId:{exact:e}}).then((e=>{a.value=new MediaRecorder(e),a.value.addEventListener("dataavailable",g),a.value.addEventListener("stop",h),r.value=n.value.createMediaStreamSource(e)}))}return(e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",null,[(0,i.Wm)(s,{onSelect:v}),(0,i._)("button",{onClick:f},"Connect"),(0,i._)("button",{onClick:d},"Start"),(0,i._)("button",{onClick:p},"Stop")]),r.value&&n.value?((0,i.wg)(),(0,i.j4)(m,{key:0,input:r.value,ctx:n.value,state:l.value},null,8,["input","ctx","state"])):(0,i.kq)("",!0),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.value,((e,t)=>((0,i.wg)(),(0,i.j4)(D,{key:t,src:e.src},null,8,["src"])))),128))])],64))}};const S=k;var x=S;(0,l.ri)(x).mount("#app")}},t={};function n(l){var i=t[l];if(void 0!==i)return i.exports;var u=t[l]={exports:{}};return e[l](u,u.exports,n),u.exports}n.m=e,function(){var e=[];n.O=function(t,l,i,u){if(!l){var a=1/0;for(v=0;v<e.length;v++){l=e[v][0],i=e[v][1],u=e[v][2];for(var o=!0,r=0;r<l.length;r++)(!1&u||a>=u)&&Object.keys(n.O).every((function(e){return n.O[e](l[r])}))?l.splice(r--,1):(o=!1,u<a&&(a=u));if(o){e.splice(v--,1);var c=i();void 0!==c&&(t=c)}}return t}u=u||0;for(var v=e.length;v>0&&e[v-1][2]>u;v--)e[v]=e[v-1];e[v]=[l,i,u]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var i,u,a=l[0],o=l[1],r=l[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(r)var v=r(n)}for(t&&t(l);c<a.length;c++)u=a[c],n.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return n.O(v)},l=self["webpackChunkoptical_bell"]=self["webpackChunkoptical_bell"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(8696)}));l=n.O(l)})();
//# sourceMappingURL=app.8cbe374e.js.map