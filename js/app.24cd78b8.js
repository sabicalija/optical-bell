(function(){"use strict";var e={663:function(e,t,n){var i=n(9242),l=(n(7658),n(3396)),u=n(4870),a=n(7139);const o=(0,l._)("label",{for:"input-devices"},"Select input device: ",-1),r=["value"];var c={__name:"InputDeviceSelector",emits:["select"],setup(e,{emit:t}){const n=(0,u.iH)([]);function i(e){t("select",e.target.value)}return navigator.mediaDevices.enumerateDevices().then((e=>n.value.push(...e.filter((({kind:e})=>"audioinput"===e))))),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[o,(0,l._)("select",{id:"input-devices",onChange:i},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.value,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.deviceId,value:e.deviceId},(0,a.zw)(e.label),9,r)))),128))],32)],64))}};const v=c;var s=v,f=(n(3408),n(4590),n(5065),{__name:"Oscilloscope",props:{input:{type:MediaStreamAudioSourceNode,default:null},ctx:{type:AudioContext,default:null},state:{type:String,default:"inactive"}},setup(e){const t=e,n=(0,u.iH)(null),{ctx:i,input:a,state:o}=(0,u.BK)(t),r=i.value.createAnalyser();r.fftSize=2048,a.value.connect(r);const c=r.frequencyBinCount,v=new Uint8Array(c);let s=0;function f(e){if(!n.value)return;requestAnimationFrame(f);const t=n.value.getContext("2d");r.getByteTimeDomainData(v),t.fillStyle="rgb(200, 200, 200)",t.fillRect(0,0,n.value.width,n.value.height),t.lineWidth=2,t.strokeStyle="rgb(0, 0, 0)",t.beginPath();const i=1*n.value.width/c;let l=0;for(let u=0;u<c;u++){const e=v[u]/128,a=e*n.value.height/2;0===u?t.moveTo(l,a):t.lineTo(l,a),l+=i}t.lineTo(n.value.width,n.value.height/2),t.stroke(),t.beginPath(),t.fillStyle="recording"===o.value?"red":"gray",t.arc(.035*n.value.width,.075*n.value.height-7,8,0,2*Math.PI),t.fill(),t.font="1.5rem serif",t.fillStyle="recording"===o.value?"black":"gray",t.fillText("REC",.05*n.value.width,.075*n.value.height),t.fillStyle="black",t.fillText(`${Number(1e3/(e-s)).toFixed(0)} FPS`,.9*n.value.width,.075*n.value.height),s=e}return r.getByteTimeDomainData(v),(0,l.bv)((()=>{f()})),(e,t)=>((0,l.wg)(),(0,l.iD)("canvas",{id:"oscilloscope",ref_key:"oscilloscope",ref:n,width:"1000",height:"600"},null,512))}}),d=n(89);const p=(0,d.Z)(f,[["__scopeId","data-v-cb81b4bc"]]);var h=p;const g=["src"],b=(0,l._)("button",null,"Delete",-1);var w={__name:"Recording",props:{src:{type:String,required:!0}},setup(e){const t="Default";return(n,i)=>((0,l.wg)(),(0,l.iD)("li",null,[(0,l._)("article",null,[(0,l._)("p",null,(0,a.zw)(t)),(0,l._)("audio",{controls:"",src:e.src},null,8,g),b])]))}};const y=w;var m=y,_={__name:"App",setup(e){const t=(0,u.iH)(""),n=(0,u.iH)(),i=(0,u.iH)(),a=(0,u.iH)(),o=(0,u.iH)([]),r=(0,u.iH)();let c=[];function v(e){console.log(`Device ${e} selected`),w(e)}function f(){n.value=new AudioContext,w(t.value)}function d(){n.value&&(a.value.start(),i.value=a.value.state)}function p(){n.value&&(a.value.stop(),i.value=a.value.state)}function g(e){c.push(e.data)}function b(e){let t=new Blob(c,{type:"audio/mpeg"});c=[];const n=URL.createObjectURL(t);o.value.push({src:n})}function w(e){t.value=e,navigator.mediaDevices.getUserMedia({audio:!0,deviceId:{exact:e}}).then((e=>{a.value=new MediaRecorder(e),a.value.addEventListener("dataavailable",g),a.value.addEventListener("stop",b),r.value=n.value.createMediaStreamSource(e)}))}return(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l.Wm)(s,{onSelect:v}),(0,l._)("button",{onClick:f},"Connect"),(0,l._)("button",{onClick:d},"Start"),(0,l._)("button",{onClick:p},"Stop")]),r.value&&n.value?((0,l.wg)(),(0,l.j4)(h,{key:0,input:r.value,ctx:n.value,state:i.value},null,8,["input","ctx","state"])):(0,l.kq)("",!0),(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.value,((e,t)=>((0,l.wg)(),(0,l.j4)(m,{key:t,src:e.src},null,8,["src"])))),128))])],64))}};const k=_;var D=k;(0,i.ri)(D).mount("#app")}},t={};function n(i){var l=t[i];if(void 0!==l)return l.exports;var u=t[i]={exports:{}};return e[i](u,u.exports,n),u.exports}n.m=e,function(){var e=[];n.O=function(t,i,l,u){if(!i){var a=1/0;for(v=0;v<e.length;v++){i=e[v][0],l=e[v][1],u=e[v][2];for(var o=!0,r=0;r<i.length;r++)(!1&u||a>=u)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(o=!1,u<a&&(a=u));if(o){e.splice(v--,1);var c=l();void 0!==c&&(t=c)}}return t}u=u||0;for(var v=e.length;v>0&&e[v-1][2]>u;v--)e[v]=e[v-1];e[v]=[i,l,u]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,u,a=i[0],o=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(l in o)n.o(o,l)&&(n.m[l]=o[l]);if(r)var v=r(n)}for(t&&t(i);c<a.length;c++)u=a[c],n.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return n.O(v)},i=self["webpackChunkoptical_bell"]=self["webpackChunkoptical_bell"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(663)}));i=n.O(i)})();
//# sourceMappingURL=app.24cd78b8.js.map